<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RoundEdge 2.0A User Manual | POV-Ray Object Collection</title>
<link rel="stylesheet" type="text/css" href="roundedge.css">
</head>

<body>

<h1>RoundEdge 2.0A User&nbsp;Manual</h1>

<p class="intro">A library module from the
 <a href="https://www.povray.org/">Persistence of Vision Raytracer (POV-Ray)</a>
 <a href="http://lib.povray.org/">Object Collection</a>.

<h2>Abstract</h2>

<p><a href="roundedge.jpg"><img class="demo" src="roundedge_thumbnail.jpg"
 title="Larger image" alt="[Thumbnail which links to a demo image]"></a>
Perfectly sharp edges are rare in real life. Blunting or rounding-off the edges of ray traced objects brings out specular highlights and other, more subtle lighting effects that can make the difference between “That’s a nice ray-traced scene,” and “Wow!”

<p>Unfortunately, with CSG this task is tedious and time-consuming. The standard include file <code>shapes.inc</code> has some helpful macros to assist with this task, but they are rather limited. RoundEdge builds upon <code>shapes.inc</code> and adds some additional objects and functions.

<hr>

<h2 id="toc">Table of Contents</h2>

<table class="toc">
 <tr>
  <td>
   <ul>
    <li><a href="#Overview"><b>Overview</b></a>
     <ul>
      <li><a href="#Files">Downloaded files</a>
      <li><a href="#Prerequisites">Prerequisites</a>
      <li><a href="#Compliance">Namespace Compliance</a>
      <li><a href="#Usage">Usage</a>
     </ul>
    <li><a href="#Joint_Macros"><b>Joint Macros</b></a>
     <ul>
      <li><a href="#RE_Corner_join">RE_Corner_join</a>
      <li><a href="#RE_Round_join">RE_Round_join</a>
      <li><a href="#RE_Round_inside_join">RE_Round_inside_join</a>
      <li><a href="#RE_Straight_join_x">RE_Straight_join_x</a>
      <li><a href="#RE_Straight_join_y">RE_Straight_join_y</a>
      <li><a href="#RE_Straight_join_z">RE_Straight_join_z</a>
     </ul>
    <li><a href="#Edge_Macro"><b>Edge Macros</b></a>
     <ul>
      <li><a href="#RE_Elliptorus_mesh">RE_Elliptorus_mesh</a>
      <li><a href="#RE_Elliptorus_octant">RE_Elliptorus_octant</a>
      <li><a href="#RE_Parabolic_torus">RE_Parabolic_torus</a>
     </ul>
    <li><a href="#Rounded_Cylinder_Macros"><b>Rounded Cylinder Macros</b></a>
     <ul>
      <li><a href="#RE_Cylinder">RE_Cylinder</a>
      <li><a href="#RE_Cylinder_end">RE_Cylinder_end</a>
      <li><a href="#RE_Hole">RE_Hole</a>
      <li><a href="#RE_Hole_end">RE_Hole_end</a>
      <li><a href="#RE_Hole_minimal">RE_Hole_minimal</a>
      <li><a href="#RE_Hole_end_minimal">RE_Hole_end_minimal</a>
      <li><a href="#RE_Washer">RE_Washer</a>
      <li><a href="#RE_Washer_end">RE_Washer_end</a>
     </ul>
   </ul>
  </td> <td>
   <ul>
    <li><a href="#Rounded_Box_Macros"><b>Rounded Box Macros</b></a>
     <ul>
      <li><a href="#RE_Box">RE_Box</a>
      <li><a href="#RE_Box_x">RE_Box_x</a>
      <li><a href="#RE_Box_y">RE_Box_y</a>
      <li><a href="#RE_Box_z">RE_Box_z</a>
      <li><a href="#RE_Box_left">RE_Box_left</a>
      <li><a href="#RE_Box_right">RE_Box_right</a>
      <li><a href="#RE_Box_up">RE_Box_up</a>
      <li><a href="#RE_Box_down">RE_Box_down</a>
      <li><a href="#RE_Box_near">RE_Box_near</a>
      <li><a href="#RE_Box_far">RE_Box_far</a>
      <li><a href="#RE_Box_x_up">RE_Box_x_up</a>
      <li><a href="#RE_Box_x_down">RE_Box_x_down</a>
      <li><a href="#RE_Box_x_near">RE_Box_x_near</a>
      <li><a href="#RE_Box_x_far">RE_Box_x_far</a>
      <li><a href="#RE_Box_y_left">RE_Box_y_left</a>
      <li><a href="#RE_Box_y_right">RE_Box_y_right</a>
      <li><a href="#RE_Box_y_near">RE_Box_y_near</a>
      <li><a href="#RE_Box_y_far">RE_Box_y_far</a>
      <li><a href="#RE_Box_z_up">RE_Box_z_up</a>
      <li><a href="#RE_Box_z_down">RE_Box_z_down</a>
      <li><a href="#RE_Box_z_left">RE_Box_z_left</a>
      <li><a href="#RE_Box_z_right">RE_Box_z_right</a>
     </ul>
   </ul>
  </td> <td>
   <ul>
    <li><a href="#Unequal_Edge_Macros"><b>Unequal Edge Box Macros</b></a>
     <ul>
      <li><a href="#RE_Unequal">RE_Unequal</a>
      <li><a href="#RE_Unequal_end">RE_Unequal_end</a>
      <li><a href="#RE_Unequal_side">RE_Unequal_side</a>
      <li><a href="#RE_Unequal_side_end">RE_Unequal_side_end</a>
      <li><a href="#RE_Unequal_edge">RE_Unequal_edge</a>
      <li><a href="#RE_Unequal_corner">RE_Unequal_corner</a>
     </ul>
    <li><a href="#Isosurface_Macros"><b>Isosurface Macro</b></a>
     <ul>
      <li><a href="#RE_Evaluate">RE_Evaluate</a>
     </ul>
    <li><a href="#Isosurface_Functions"><b>Isosurface Functions</b></a>
     <ul>
      <li><a href="#RE_fn_Blob">RE_fn_Blob</a>
      <li><a href="#RE_fn_Blob2">RE_fn_Blob2</a>
      <li><a href="#RE_fn_Hole">RE_fn_Hole</a>
      <li><a href="#RE_fn_Parabolic_torus">RE_fn_Parabolic_torus</a>
      <li><a href="#RE_fn_Wheel">RE_fn_Wheel</a>
      <li><a href="#max_gradient">max_gradient warnings</a>
     </ul>
    <li><a href="#Blob_Assist_Functions"><b>Blob Assist Functions</b></a>
     <ul>
      <li><a href="#RE_fn_Blob_surface_radius">RE_fn_Blob_surface_radius</a>
      <li><a href="#RE_fn_Blob_field_radius">RE_fn_Blob_field_radius</a>
      <li><a href="#RE_fn_Blob_strength">RE_fn_Blob_strength</a>
     </ul>
    <li><a href="#Other"><b>Other identifiers</b></a>
    <li><a href="#About"><b>About RoundEdge</b></a>
   </ul>
  </td>
 </tr>
</table>

<hr>

<h2 id="Overview">Overview</h2>

<h3 id="Files">Downloaded Files</h3>

<table>
 <tr>
  <th colspan="2">Key Files</th>
 </tr><tr>
  <th>File</th>
  <th>Description</th>
 </tr><tr>
  <td><code>roundedge.html</code></td>
  <td>The user manual (this document)</td>
 </tr><tr>
  <td><code>roundedge.inc</code></td>
  <td>The RoundEdge library</td>
 </tr><tr>
  <td><code>roundedge.pov</code></td>
  <td>A demonstration scene description file, which was used to render the sample illustrations in this manual</td>
 </tr><tr>
  <td><code>roundedge.jpg</code></td>
  <td rowspan="2">Sample output images</td>
 </tr><tr>
  <td><code>roundedge_thumbnail.jpg</code></td>
 </tr><tr>
  <td><code>roundedge_</code><var>nn</var><code>.jpg</code></td>
  <td>Illustrations of the various features, where the italicized <var>nn</var> represents a 2-digit number (36 images)</td>
 </tr><tr>
  <th colspan="2">Administrative Files</th>
 </tr><tr>
  <th>File</th>
  <th>Description</th>
 </tr><tr>
  <td><code>README</code><var>nnnnnn</var><code>.html</code></td>
  <td>Important information about using the POV-Ray Object Collection</td>
 </tr><tr>
  <td><code>roundedge_description.txt</code></td>
  <td>A brief description of RoundEdge</td>
 </tr><tr>
  <td><code>roundedge_keywords.txt</code></td>
  <td>A list of keywords</td>
 </tr><tr>
  <td><code>roundedge_prereqs.txt</code></td>
  <td>Prerequisites (empty file)</td>
 </tr><tr>
  <td><code>roundedge.css</code></td>
  <td rowspan="3">Other administrative files</td>
 </tr><tr>
  <td><code>cc-LGPL-a.png</code></td>
 </tr><tr>
  <td><code>Version</code><var>nnnnnn</var><code>.js</code></td>
 </tr>
</table>

<p>The italicized <var>nnnnnn</var> in some of the file names represents the 6-digit number that is in the name of the <code>.zip</code> file as downloaded from <a href="http://lib.povray.org/">lib.povray.org</a>. If you downloaded this module from some other repository, the files <code>cc-LGPL-a.png</code>, <code>README<var>nnnnnn</var>.html</code>, and <code>Version<var>nnnnnn</var>.js</code> may not be present. Please see the <a href="https://web.archive.org/web/20120419111948/http://lib.povray.org/usersguide/02using.html">Object Collection User’s Guide</a> if <code>README<var>nnnnnn</var>.html</code> is not present.

<p>Note: The file <code>roundedge_cc-lgpl.png</code> is no longer used.

<p><a href="#toc">Table of contents</a><hr>

<h3 id="Prerequisites">Prerequisites</h3>

<p>RoundEdge requires POV-Ray version 3.5 or later.

<h3 id="Compliance">Namespace Compliance</h3>

<p>All file names in this module and all global and local identifiers defined in <code>roundedge.inc</code> comply fully with the <a href="https://news.povray.org/470b46cb%241%40news.povray.org">Object Collection naming standards</a>, as <a href="https://news.povray.org/48ba92e8%241%40news.povray.org">revised August 2008</a> and <a href="https://news.povray.org/povray.object-collection/thread/%3Cweb.5018a69dae7e89cb85de7b680%40news.povray.org%3E/">proposed August 2012</a>. The files in this module may be safely stored in the same folder as other fully compliant Object Collection modules.

<p>The reserved prefixes for this module are “<code>roundedge</code>” and “<code>RE</code>,” including any uppercase and lowercase variants. To avoid conflicts, do not introduce into your scene description file any identifiers with either of these prefixes as names, or any identifiers that start with either of these prefixes plus an underscore.

<p>The standard include files <code>functions.inc</code>, <code>math.inc</code>, <code>shapes.inc</code>, and <code>transforms.inc</code> are used by <code>roundedge.inc</code>. The identifier <code>View_POV_Include_Stack</code> from the standard include file <code>debug.inc</code> is referenced by <code>roundedge.inc</code>, although <code>debug.inc</code> itself is not used.

<h3 id="Usage">Usage</h3>

<p>Include this file once prior to using any of the features of RoundEdge:

<pre>#include "roundedge.inc"</pre>

<p>Including the file more than once is harmless, though unnecessary.

<h4 id="Invalid">Invalid Arguments</h4>

<p>The descriptions of the objects assume valid arguments. If the arguments are not valid (for example, a negative radius), then the shape is undefined; that is, with no guarantee of what it will look like or that it will fit anywhere. To assist the user, a warning or error message will be issued.

<p><a href="#toc">Table of contents</a><hr>

<h2 id="Joint_Macros">Joint Macros</h2>

<h3 id="RE_Corner_join">RE_Corner_join (rBlob)</h3>

<p><img class="demo" src="roundedge_01.jpg" alt="[Demo image of RE_Corner_join()]">
An instant blob for the point of intersection of three orthogonal planes. It can be used to patch the Y-shaped seams left by the <a href="#RE_Straight_join_x">straight join macros</a>. The joint is at the origin, and the curve faces the positive <var>x</var>-<var>y</var>-<var>z</var> octant. (In the illustration, the <code>RE_Corner_join()</code> object has been rotated to match the corner.) To avoid potential coincident surfaces, the object overlaps the origin and the three planes.

<h4>Argument</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>rBlob</code></td>
  <td>float</td>
  <td>The radius of the blob curve.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Round_join" class="anew">RE_Round_join (RPost, rBlob)</h3>

<p><img class="demo" src="roundedge_02.jpg" alt="[Demo image of RE_Round_join()]">
An instant blob for a vertical cylindrical post joined to a horizontal plane. The intersection of the post’s axis with the plane is at the origin. To avoid potential coincident surfaces, the bottom surface of the join is slightly below the origin.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>RPost</code></td>
  <td>float</td>
  <td>The radius of the post.</td>
 </tr><tr>
  <td><code>rBlob</code></td>
  <td>float</td>
  <td>The radius of the blob curve.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Round_inside_join" class="anew">RE_Round_inside_join (RHollow, rBlob)</h3>

<p><img class="demo" src="roundedge_03.jpg" alt="[Demo image of RE_Round_inside_join()]">
An instant blob for a vertical hollow cylinder joined to a horizontal plane. The intersection of the cylinder’s axis with the plane is at the origin. To avoid potential coincident surfaces, the join slightly overlaps the hollow cylinder, and bottom surface of the join is slightly below the origin.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>RHollow</code></td>
  <td>float</td>
  <td>The radius of the hollow space.</td>
 </tr><tr>
  <td><code>rBlob</code></td>
  <td>float</td>
  <td>The radius of the blob curve.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Straight_join_x" class="anew">RE_Straight_join_x (pv_Start, End_x, rBlob, Dir)</h3>

<p><img class="demo" src="roundedge_04.jpg" alt="[Demo image of RE_Straight_join_x(), RE_Straight_join_y(), and RE_Straight_join_z()]">
An instant blob for the join between a <var>y</var>-normal plane and a <var>z</var>-normal plane. To avoid potential coincident surfaces, the object overlaps the line of intersection.

<h4>Arguments</h4>
<p>These arguments may seem odd, but they were chosen to minimize typing and mental effort.
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>pv_Start</code></td>
  <td>point vector</td>
  <td>One endpoint of the intersection.</td>
 </tr><tr>
  <td><code>End_x</code></td>
  <td>float</td>
  <td>The <strong>scalar</strong> <var>x</var> value of the other endpoint.</td>
 </tr><tr>
  <td><code>rBlob</code></td>
  <td>float</td>
  <td>The radius of the blob curve.</td>
 </tr><tr>
  <td><code>Dir</code></td>
  <td>float</td>
  <td>Rotation about the line of intersection, in degrees.</td>
 </tr>
</table>

<h3 id="RE_Straight_join_y">RE_Straight_join_y (pv_Start, End_y, rBlob, Dir)</h3>

<p>An instant blob for the join between an <var>x</var>-normal plane and a <var>z</var>-normal plane. To avoid potential coincident surfaces, the object overlaps the line of intersection.

<h4>Arguments</h4>
<p>These arguments may seem odd, but they were chosen to minimize typing and mental effort.
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>pv_Start</code></td>
  <td>point vector</td>
  <td>One endpoint of the intersection.</td>
 </tr><tr>
  <td><code>End_y</code></td>
  <td>float</td>
  <td>The <strong>scalar</strong> <var>y</var> value of the other endpoint.</td>
 </tr><tr>
  <td><code>rBlob</code></td>
  <td>float</td>
  <td>The radius of the blob curve.</td>
 </tr><tr>
  <td><code>Dir</code></td>
  <td>float</td>
  <td>Rotation about the line of intersection, in degrees.</td>
 </tr>
</table>

<h3 id="RE_Straight_join_z">RE_Straight_join_z (pv_Start, End_z, rBlob, Dir)</h3>

<p>An instant blob for the join between an <var>x</var>-normal plane and a <var>y</var>-normal plane. To avoid potential coincident surfaces, the object overlaps the line of intersection.

<h4>Arguments</h4>
<p>These arguments may seem odd, but they were chosen to minimize typing and mental effort.
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>pv_Start</code></td>
  <td>point vector</td>
  <td>One endpoint of the intersection.</td>
 </tr><tr>
  <td><code>End_z</code></td>
  <td>float</td>
  <td>The <strong>scalar</strong> <var>z</var> value of the other endpoint.</td>
 </tr><tr>
  <td><code>rBlob</code></td>
  <td>float</td>
  <td>The radius of the blob curve.</td>
 </tr><tr>
  <td><code>Dir</code></td>
  <td>float</td>
  <td>Rotation about the line of intersection, in degrees.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a><hr>

<h2 id="Edge_Macro">Edge Macros</h2>

<h3 id="RE_Elliptorus_mesh">RE_Elliptorus_mesh (RxMajor, RzMajor, rMinor, ThetaRes, PhiRes)</h3>

<p><img class="demo" src="roundedge_05.jpg" alt="[Demo image of RE_Elliptorus_mesh()]">
A toroid mesh that can serve as a rounded edge for scaled cylinders, when it is desired that the edge radius not be scaled with the cylinders. The central curve, the extreme inner curve, and the extreme outer curve are all ellipses (within the resolution of the mesh). Note that a sphere sweep does not satisfy this condition (except for the boundary cases where the ellipses are circles), as the required shape does not have a constant minor radius.

<p>The toroid is oriented horizontally. (In the illustration, it has been rotated 90° about the <var>x</var>-axis for better viewing.) The mesh is closed, and can therefore be used in CSG differences and intersections.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>RxMajor</code></td>
  <td>float</td>
  <td>The major radius in the <var>x</var>-direction.</td>
 </tr><tr>
  <td><code>RzMajor</code></td>
  <td>float</td>
  <td>The major radius in the <var>z</var>-direction.</td>
 </tr><tr>
  <td><code>rMinor</code></td>
  <td>float</td>
  <td>The nominal minor radius.</td>
 </tr><tr>
  <td><code>ThetaRes</code></td>
  <td>float</td>
  <td>The number of longitudinal mesh divisions, which must be at least 4.</td>
 </tr><tr>
  <td><code>PhiRes</code></td>
  <td>float</td>
  <td>The number of latitudinal mesh divisions, which must be at least 4.</td>
 </tr>
</table>

<h3 id="RE_Elliptorus_octant" class="anew">RE_Elliptorus_octant (RxMajor, RzMajor, rMinor, ThetaRes, PhiRes)</h3>

<p><img class="demo" src="roundedge_06.jpg" alt="[Demo image of RE_Elliptorus_mesh_octant()]">
The +<var>x</var>, +<var>y</var>, +<var>z</var> octant of a horizontally oriented elliptical toroid, implemented as a mesh. The object is intended to serve as a rounded edge for scaled cylinders, when it is desired that the edge radius not be scaled with the cylinders. The central curve, the extreme inner curve, and the extreme outer curve are all elliptical arcs (within the resolution of the mesh). Note that a sphere sweep does not satisfy this condition (except for the boundary cases where the arcs are circular), as the required shape does not have a constant minor radius.

<p>The mesh is closed, and can therefore be used in CSG differences and intersections. The “flat” surfaces are bowed outward slightly to avoid potential coincident surfaces. (There are still intermittent artifacts resembling coincident surfaces, but I haven’t yet identified the cause.)

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>RxMajor</code></td>
  <td>float</td>
  <td>The major radius in the <var>x</var>-direction.</td>
 </tr><tr>
  <td><code>RzMajor</code></td>
  <td>float</td>
  <td>The major radius in the <var>z</var>-direction.</td>
 </tr><tr>
  <td><code>rMinor</code></td>
  <td>float</td>
  <td>The nominal minor radius.</td>
 </tr><tr>
  <td><code>ThetaRes</code></td>
  <td>float</td>
  <td>The number of longitudinal mesh divisions, which must be at least 1.</td>
 </tr><tr>
  <td><code>PhiRes</code></td>
  <td>float</td>
  <td>The number of latitudinal mesh divisions, which must be at least 2. Use an even number for best results.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Parabolic_torus" class="anew">RE_Parabolic_torus (H, R)</h3>

<p><img class="demo" src="roundedge_07.jpg" alt="[Demo image of RE_Parabolic_torus()]">
A circle of radius <code>R</code> parallel to the <var>y</var>-<var>z</var> plane, swept along the parabola <var>y</var> = <code>H</code><var>x</var><sup>2</sup> | <var>z</var> = 0.
The user is responsible for clipping and bounding. The objects are prone to floating point error, so an isosurface function, <a href="#RE_fn_Parabolic_torus"><code>RE_fn_Parabolic_torus()</code></a>, is also provided.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>H</code></td>
  <td>float</td>
  <td>The amplitude of the parabola.</td>
 </tr><tr>
  <td><code>R</code></td>
  <td>float</td>
  <td>The minor radius.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a><hr>

<h2 id="Rounded_Cylinder_Macros">Rounded Cylinder Macros</h2>

<h3 id="RE_Cylinder">RE_Cylinder (A, B, ROuter, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_08.jpg" alt="[Demo image of RE_Cylinder()]">
A replacement for macro <a href="https://wiki.povray.org/content/Reference:Shapes.inc#Index_Entry_round_cylinder_union"><code>Round_Cylinder()</code></a> with several enhancements:
<ul>
 <li>Scalar endpoints are automatically expanded to vectors.
 <li>The degenerate cylinder case where the axis is exactly twice the edge radius is rendered.
 <li>For the union version, if set as a photons target, photons will be shot at the object as a whole, rather than at its component parts separately. For compact unions such as <code>RE_Cylinder()</code>, this generally results in faster renders. (This feature can be disabled by setting <a href="#Other"><code>RE_Split_union</code></a> to <code>on</code>.)
 <li><code>Round_Cylinder_Merge()</code> has artifacts for large, but valid, values of <code>EdgeRadius</code>. For example:
  <pre>#include "shapes.inc"
object
{ Round_Cylinder_Merge (-y, y, 1, 0.7)
  pigment { red 1 transmit 0.5 }
}</pre>
  <p>These artifacts are eliminated in <code>RE_Cylinder()</code> and in <code>RE_Cylinder_end()</code>, below.
</ul>

<p>If the endpoints of the central axis are equal, a parse error will result.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code>, <code>B</code></td>
  <td>point vector</td>
  <td>The endpoints of the central axis. If either argument is scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>ROuter</code></td>
  <td>float</td>
  <td>The radius of the cylinder.</td>
 </tr><tr>
  <td><code>rEdge</code></td>
  <td>float</td>
  <td>The radius of the edges of the cylinder.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Cylinder_end" class="anew">RE_Cylinder_end (A, B, ROuter, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_09.jpg" alt="[Demo image of RE_Cylinder_end()]">
A cylinder that is rounded on one end. The resulting object <a href="#Invalid">will fit</a> snugly within <code>cylinder {&nbsp;A, B, ROuter&nbsp;}</code>.
If <code>A</code> and <code>B</code> are equal, a parse error will result.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code></td>
  <td>point vector</td>
  <td>The endpoint of the central axis at the rounded end of the cylinder. If scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>B</code></td>
  <td>point vector</td>
  <td>The endpoint of the central axis at the flat end of the cylinder. If scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>ROuter</code></td>
  <td>float</td>
  <td>The radius of the cylinder.</td>
 </tr><tr>
  <td><code>rEdge</code></td>
  <td>float</td>
  <td>The radius of the rounded edge.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Hole" class="anew">RE_Hole (A, B, ROuter, RInner, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_10.jpg" alt="[Demo image of RE_Hole()]">
A cylinder with a hole along the central axis.
The edges of the hole are rounded.
The resulting object <a href="#Invalid">will fit</a> snugly within
<code>cylinder {&nbsp;A, B, ROuter&nbsp;}</code> and snugly around
<code>cylinder {&nbsp;A, B, RInner&nbsp;}</code>.
If <code>A</code> and <code>B</code> are equal, a parse error will result.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code>, <code>B</code></td>
  <td>point vector</td>
  <td>The endpoints of the central axis. If either argument is scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>ROuter</code></td>
  <td>float</td>
  <td>The radius of the cylinder.</td>
 </tr><tr>
  <td><code>RInner</code></td>
  <td>float</td>
  <td>The inner radius of the hole.</td>
 </tr><tr>
  <td><code>rEdge</code></td>
  <td>float</td>
  <td>The radius of the rounded edges.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Hole_end" class="anew">RE_Hole_end (A, B, ROuter, RInner, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_11.jpg" alt="[Demo image of RE_Hole_end()]">
A cylinder with a hole along the central axis.
The edge of the hole at one end is rounded.
The resulting object <a href="#Invalid">will fit</a> snugly within
<code>cylinder {&nbsp;A, B, ROuter&nbsp;}</code> and snugly around
<code>cylinder {&nbsp;A, B, RInner&nbsp;}</code>.
If <code>A</code> and <code>B</code> are equal, a parse error will result.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code></td>
  <td>point vector</td>
  <td>The endpoint of the central axis at the rounded opening. If scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>B</code></td>
  <td>point vector</td>
  <td>The endpoint of the central axis at the sharp-rimmed opening. If scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>ROuter</code></td>
  <td>float</td>
  <td>The radius of the cylinder.</td>
 </tr><tr>
  <td><code>RInner</code></td>
  <td>float</td>
  <td>The inner radius of the hole.</td>
 </tr><tr>
  <td><code>rEdge</code></td>
  <td>float</td>
  <td>The radius of the rounded edge.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Hole_minimal" class="anew">RE_Hole_minimal (A, B, RInner, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_12.jpg" alt="[Demo image of RE_Hole_minimal()]">
A cylinder with a hole along the central axis.
The edges of the hole are rounded, and the cylinder is just wide enough to cover the joint between perpendicular rounded boxes of the same edge radius.
The object <a href="#Invalid">will fit</a> snugly around
<code>cylinder {&nbsp;A, B, RInner&nbsp;}</code>.
If <code>A</code> and <code>B</code> are equal, a parse error will result.
<p>Note: the illustration shows only one quadrant of the <code>RE_Hole_minimal()</code> object.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code>, <code>B</code></td>
  <td>point vector</td>
  <td>The endpoints of the central axis. If either argument is scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>RInner</code></td>
  <td>float</td>
  <td>The inner radius of the hole.</td>
 </tr><tr>
  <td><code>rEdge</code></td>
  <td>float</td>
  <td>The radius of the rounded edges.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Hole_end_minimal" class="anew">RE_Hole_end_minimal (A, B, RInner, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_13.jpg" alt="[Demo image of RE_Hole_end_minimal()]">
A cylinder with a hole along the central axis.
One edge of the hole is rounded, and the cylinder is just wide enough to cover the joint between perpendicular rounded boxes of the same edge radius.
The object <a href="#Invalid">will fit</a> snugly around
<code>cylinder {&nbsp;A, B, RInner&nbsp;}</code>.
If <code>A</code> and <code>B</code> are equal, a parse error will result.
<p>Note: the illustration shows only one quadrant of the <code>RE_Hole_end_minimal()</code> object.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code></td>
  <td>point vector</td>
  <td>The endpoint of the central axis at the rounded opening. If scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>B</code></td>
  <td>point vector</td>
  <td>The endpoint of the central axis at the sharp-rimmed opening. If scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>RInner</code></td>
  <td>float</td>
  <td>The inner radius of the hole.</td>
 </tr><tr>
  <td><code>rEdge</code></td>
  <td>float</td>
  <td>The radius of the rounded edge.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Washer" class="anew">RE_Washer (A, B, ROuter, RInner, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_14.jpg" alt="[Demo image of RE_Washer()]">
A cylinder with a hole along the central axis.
The edges of the cylinder and the hole are rounded.
The resulting object <a href="#Invalid">will fit</a> snugly within
<code>cylinder {&nbsp;A, B, ROuter&nbsp;}</code> and snugly around
<code>cylinder {&nbsp;A, B, RInner&nbsp;}</code>.
If <code>A</code> and <code>B</code> are equal, a parse error will result.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code>, <code>B</code></td>
  <td>point vector</td>
  <td>The endpoints of the central axis. If either argument is scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>ROuter</code></td>
  <td>float</td>
  <td>The outer radius of the cylinder.</td>
 </tr><tr>
  <td><code>RInner</code></td>
  <td>float</td>
  <td>The inner radius of the hole.</td>
 </tr><tr>
  <td><code>rEdge</code></td>
  <td>float</td>
  <td>The radius of the rounded edges.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Washer_end" class="anew">RE_Washer_end (A, B, ROuter, RInner, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_15.jpg" alt="[Demo image of RE_Washer_end()]">
A cylinder with a hole along the central axis.
The edges on one side of the cylinder and the hole are rounded.
The resulting object <a href="#Invalid">will fit</a> snugly within
<code>cylinder {&nbsp;A, B, ROuter&nbsp;}</code> and snugly around
<code>cylinder {&nbsp;A, B, RInner&nbsp;}</code>.
If <code>A</code> and <code>B</code> are equal, a parse error will result.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code></td>
  <td>point vector</td>
  <td>The endpoint of the central axis at the rounded side of the object. If scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>B</code></td>
  <td>point vector</td>
  <td>The endpoint of the central axis at the flat side of the object. If scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>ROuter</code></td>
  <td>float</td>
  <td>The outer radius of the cylinder.</td>
 </tr><tr>
  <td><code>RInner</code></td>
  <td>float</td>
  <td>The inner radius of the hole.</td>
 </tr><tr>
  <td><code>rEdge</code></td>
  <td>float</td>
  <td>The radius of the rounded edges.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a><hr>

<h2 id="Rounded_Box_Macros">Rounded Box Macros</h2>

<h3>Summary</h3>

<p>The first macro creates a box with all its edges rounded off. The remaining macros create boxes with only some rounded edges. The intent of the partially rounded box macros is to reduce object counts in situations where rounding all edges is unnecessary. This can result in significantly faster renders when differences, intersections, or photons are used, in addition to reducing the need for differences and intersections.

<p>Despite the large number of macros in this section, there are only four basic shapes: the fully rounded box; and three partially rounded boxes that are pre-rotated into various orientations by the macros.

<p>All of these rounded box macros take the same set of arguments:
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code>, <code>B</code></td>
  <td>point vector</td>
  <td>Opposite points of the box. If either argument is scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>rEdge</code></td>
  <td>float</td>
  <td>The radius of the edges of the box.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p>The resulting object <a href="#Invalid">will fit</a> snugly within <code>box {&nbsp;A, B&nbsp;}</code>.

<h3 id="RE_Box">RE_Box (A, B, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_16.jpg" alt="[Demo image of RE_Box()]">
A wrapper for macro <a href="https://wiki.povray.org/content/Reference:Shapes.inc#Index_Entry_round_box_union"><code>Round_Box()</code></a> with two enhancements:
<ul>
 <li>Scalar corner points are automatically expanded to vectors.
 <li>For the union version, if set as a photons target, photons will be shot at the object as a whole, rather than at its component parts separately. For compact unions such as <code>Round_Box_Union()</code>, this generally results in faster renders. (This feature can be disabled by setting <a href="#Other"><code>RE_Split_union</code></a> to <code>on</code>.)
</ul>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Box_x" class="anew">RE_Box_x (A, B, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_17.jpg" alt="[Demo image of RE_Box_x(), RE_Box_y(), and RE_Box_z()]">
A box with the four edges in the <var>x</var>-direction rounded, like a can of sardines on its side. A box of zero width will cause a parse error.

<h3 id="RE_Box_y">RE_Box_y (A, B, rEdge, Use_merge)</h3>

<p>A box with the four edges in the <var>y</var>-direction rounded, like a can of sardines. A box of zero height will cause a parse error.

<h3 id="RE_Box_z">RE_Box_z (A, B, rEdge, Use_merge)</h3>

<p>A box with the four edges in the <var>z</var>-direction rounded, like a can of sardines on its side. A box of zero depth will cause a parse error.

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Box_left" class="anew">RE_Box_left (A, B, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_18.jpg" alt="[Demo image of RE_Box_left() and RE_Box_right()]">
A box with the four corners on the &minus;<var>x</var> side and the eight adjacent edges rounded.

<h3 id="RE_Box_right">RE_Box_right (A, B, rEdge, Use_merge)</h3>

<p>A box with the four corners on the +<var>x</var> side and the eight adjacent edges rounded.

<h3 id="RE_Box_up" class="anew">RE_Box_up (A, B, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_19.jpg" alt="[Demo image of RE_Box_up() and RE_Box_down()]">
A box with the four corners on the +<var>y</var> side and the eight adjacent edges rounded.

<h3 id="RE_Box_down">RE_Box_down (A, B, rEdge, Use_merge)</h3>

<p>A box with the four corners on the &minus;<var>y</var> side and the eight adjacent edges rounded.

<h3 id="RE_Box_near" class="anew">RE_Box_near (A, B, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_20.jpg" alt="[Demo image of RE_Box_near() and RE_Box_far()]">
A box with the four corners on the &minus;<var>z</var> side and the eight adjacent edges rounded.

<h3 id="RE_Box_far">RE_Box_far (A, B, rEdge, Use_merge)</h3>

<p>A box with the four corners on the +<var>z</var> side and the eight adjacent edges rounded.

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Box_x_up" class="anew">RE_Box_x_up (A, B, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_21.jpg" alt="[Demo image of RE_Box_x_up(), RE_Box_x_down(), RE_Box_x_near(), and RE_Box_x_far()]">
A box with the two top edges in the <var>x</var>-direction rounded. A box of zero width will cause a parse error.

<h3 id="RE_Box_x_down">RE_Box_x_down (A, B, rEdge, Use_merge)</h3>

<p>A box with the two bottom edges in the <var>x</var>-direction rounded. A box of zero width will cause a parse error.

<h3 id="RE_Box_x_near">RE_Box_x_near (A, B, rEdge, Use_merge)</h3>

<p>A box with the two edges in the <var>x</var>-direction on the &minus;<var>z</var> side rounded. A box of zero width will cause a parse error.

<h3 id="RE_Box_x_far">RE_Box_x_far (A, B, rEdge, Use_merge)</h3>

<p>A box with the two edges in the <var>x</var>-direction on the +<var>z</var> side rounded. A box of zero width will cause a parse error.

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Box_y_left" class="anew">RE_Box_y_left (A, B, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_22.jpg" alt="[Demo image of RE_Box_y_left(), RE_Box_y_right(), RE_Box_y_near(), and RE_Box_y_far()]">
A box with the two edges in the <var>y</var>-direction on the &minus;<var>x</var> side rounded. A box of zero height will cause a parse error.

<h3 id="RE_Box_y_right">RE_Box_y_right (A, B, rEdge, Use_merge)</h3>

<p>A box with the two edges in the <var>y</var>-direction on the +<var>x</var> side rounded. A box of zero height will cause a parse error.

<h3 id="RE_Box_y_near">RE_Box_y_near (A, B, rEdge, Use_merge)</h3>

<p>A box with the two edges in the <var>y</var>-direction on the &minus;<var>z</var> side rounded. A box of zero height will cause a parse error.

<h3 id="RE_Box_y_far">RE_Box_y_far (A, B, rEdge, Use_merge)</h3>

<p>A box with the two edges in the <var>y</var>-direction on the +<var>z</var> side rounded. A box of zero height will cause a parse error.

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Box_z_up" class="anew">RE_Box_z_up (A, B, rEdge, Use_merge)</h3>

<p><img class="demo" src="roundedge_23.jpg" alt="[Demo image of RE_Box_z_up(), RE_Box_z_down(), RE_Box_z_left(), and RE_Box_z_right()]">
A box with the two top edges in the <var>z</var>-direction rounded. A box of zero depth will cause a parse error.

<h3 id="RE_Box_z_down">RE_Box_z_down (A, B, rEdge, Use_merge)</h3>

<p>A box with the two bottom edges in the <var>z</var>-direction rounded. A box of zero depth will cause a parse error.

<h3 id="RE_Box_z_left">RE_Box_z_left (A, B, rEdge, Use_merge)</h3>

<p>A box with the two edges in the <var>z</var>-direction on the &minus;<var>x</var> side rounded. A box of zero depth will cause a parse error.

<h3 id="RE_Box_z_right">RE_Box_z_right (A, B, rEdge, Use_merge)</h3>

<p>A box with the two edges in the <var>z</var>-direction on the +<var>x</var> side rounded. A box of zero depth will cause a parse error.

<p><a href="#toc">Table of contents</a><hr>

<h2 id="Unequal_Edge_Macros">Macros for Boxes with Unequal Edge Radii</h2>

<h3>Summary</h3>

<p>The macros in this section define boxes for which the radius of the edges of two opposite faces (the <dfn>ends</dfn>) differs from the radius of the other edges (the <dfn>sides</dfn>). Examples might be a dead bolt or a wooden beam.

<p>Partially rounded boxes are defined in order to reduce object counts, which can result in significantly faster renders when differences, intersections, or photons are used. The partially rounded boxes also reduce the need for differences and intersections.

<p>The first five arguments are the same for all of the unequal edge box macros:
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>A</code>, <code>B</code></td>
  <td>point vector</td>
  <td>Opposite points of the box. If either argument is scalar, it will be promoted to a vector.</td>
 </tr><tr>
  <td><code>rSide</code></td>
  <td>float</td>
  <td>The radius of the side edges of the box.</td>
 </tr><tr>
  <td><code>rEnd</code></td>
  <td>float</td>
  <td>The radius of the end edges of the box, which must be no larger than <code>rSide</code>.</td>
 </tr><tr>
  <td><code>Use_merge</code></td>
  <td>float/Boolean</td>
  <td>Whether or not to use a CSG merge. In general, pass <code>yes</code> if the object is to be transparent, <code>no</code> otherwise.</td>
 </tr>
</table>

<p>The resulting object <a href="#Invalid">will fit</a> snugly within <code>box {&nbsp;A, B&nbsp;}</code>.

<p>Note: some degenerate shapes (those with edge radii so large that flat surfaces have been eliminated) will generate a warning that there should be at least 2 objects in CSG.

<p><a href="#toc">Table of contents</a><hr>

<h3 id="RE_Unequal" class="anew">
RE_Unequal (A, B, rSide, rEnd, Use_merge, v_Orientation)</h3>

<p><img class="demo" src="roundedge_24.jpg" alt="[Demo image of RE_Unequal()]">A box with all corners and edges rounded.

<h4>Additional Argument</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>v_Orientation</code></td>
  <td>3-D vector</td>
  <td>The axis perpendicular to the end faces. For example, if the top and bottom faces are the ends, then pass <code>y</code> as the <code>v_Orientation</code> argument.
   <p>This vector must have one and only one nonzero component, or a parse error will result.
  </td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Unequal_end" class="anew">RE_Unequal_end (A, B, rSide, rEnd, Use_merge, v_End)</h3>

<p><img class="demo" src="roundedge_25.jpg" alt="[Demo image of RE_Unequal_end()]">
A box with the edges and corners of one <em>end</em> face completely rounded. The 4 side edges are also rounded.

<h4>Additional Argument</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>v_End</code></td>
  <td>3-D vector</td>
  <td>The direction of the rounded end face. For example, if the rounded end face is at the bottom, then pass <code>-y</code> as the <code>v_End</code> argument.
   <p>This vector must have one and only one nonzero component, or a parse error will result.
  </td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Unequal_side" class="anew">RE_Unequal_side (A, B, rSide, rEnd, Use_merge, v_Orientation, v_Side)</h3>

<p><img class="demo" src="roundedge_26.jpg" alt="[Demo image of RE_Unequal_side()]">
A box with the edges and corners of one <em>side</em> face completely rounded. The 4 edges perpendicular to this face are also rounded.

<h4>Additional Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>v_Orientation</code></td>
  <td>3-D vector</td>
  <td>The axis perpendicular to the end faces. For example, if the top and bottom faces are the ends, then pass <code>y</code> as the <code>v_Orientation</code> argument.
   <p>This vector must have one and only one nonzero component, or a parse error will result.
  </td>
 </tr><tr>
  <td><code>v_Side</code></td>
  <td>3-D vector</td>
  <td>The direction to the rounded side face. For example, if the rounded side is the right face, then pass <code>x</code> as the <code>v_Side</code> argument.
   <p>This vector must have one and only one nonzero component, and orthogonal to <code>v_Orientation</code>, or a parse error will result.
  </td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Unequal_side_end" class="anew">RE_Unequal_side_end (A, B, rSide, rEnd, Use_merge, v_End, v_Side)</h3>

<p><img class="demo" src="roundedge_27.jpg" alt="[Demo image of RE_Unequal_side_end()]">
A box with one end face and one side face each rounded on 3 edges, and on the 2 corners they share.

<h4>Additional Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>v_End</code></td>
  <td>3-D vector</td>
  <td>The direction of the end face with rounded edges. For example, if this face is at the bottom, then pass <code>-y</code> as the <code>v_End</code> argument.
   <p>This vector must have one and only one nonzero component, or a parse error will result.
  </td>
 </tr><tr>
  <td><code>v_Side</code></td>
  <td>3-D vector</td>
  <td>The direction to the rounded side face. For example, if the rounded side is the right face, then pass <code>x</code> as the <code>v_Side</code> argument.
   <p>This vector must have one and only one nonzero component, which is orthogonal to <code>v_End</code>, or a parse error will result.
  </td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Unequal_edge" class="anew">RE_Unequal_edge (A, B, rSide, rEnd, Use_merge, v_Orientation, v_Edge)</h3>

<p><img class="demo" src="roundedge_28.jpg" alt="[Demo image of RE_Unequal_edge()]">
A box with one <em>side edge</em> rounded. The 2 corners at the ends of this edge and the 4 end edges that meet there, 2 at each corner, are also rounded.

<h4>Additional Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>v_Orientation</code></td>
  <td>3-D vector</td>
  <td>The axis perpendicular to the end faces. For example, if the left and right faces are the ends, then pass <code>x</code> as the <code>v_Orientation</code> argument.
   <p>This vector must have one and only one nonzero component, or a parse error will result.
  </td>
 </tr><tr>
  <td><code>v_Edge</code></td>
  <td>3-D vector</td>
  <td>The direction to the rounded side edge. For example, if the rounded edge is the upper near edge, then pass <code>y-z</code> as the <code>v_Edge</code> argument.
   <p>This vector must have exactly 2 nonzero coordinates, both orthogonal to <code>v_Orientation</code>, or a parse error will result.
  </td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_Unequal_corner" class="anew">RE_Unequal_corner (A, B, rSide, rEnd, Use_merge, v_End, v_Corner)</h3>

<p><img class="demo" src="roundedge_29.jpg" alt="[Demo image of RE_Unequal_corner()]">
A box with one corner completely rounded. The 3 edges that meet at this corner are also rounded.

<h4>Additional Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>v_End</code></td>
  <td>3-D vector</td>
  <td>The direction of the end face with the rounded corner. For example, if the near face is one of the end faces <em>and</em> has the rounded corner, then pass <code>-z</code> as the <code>v_End</code> argument.
   <p>This vector must have one and only one nonzero component, or a parse error will result.</td>
 </tr><tr>
  <td><code>v_Corner</code></td>
  <td>3-D vector</td>
  <td>The octant with the rounded corner. For example, if the rounded corner is the upper right near corner, then pass <code>x+y-z</code> as the <code>v_Corner</code> argument.
   <p>This vector must have 3 nonzero coordinates, and the coordinate corresponding to <code>v_End</code> must have the same sign (+ or &minus;) as <code>v_End</code>, or a parse error will result.
  </td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h2 id="Isosurface_Macros">Isosurface Macro</h2>

<h3 id="RE_Evaluate">RE_Evaluate (Max_gradient, Min_factor, Attenuation)</h3>

<p>Implements the <a href="http://wiki.povray.org/content/Reference:Isosurface#Index_Entry_evaluate_isosurface">isosurface <code>evaluate</code> feature</a>, automatically calculating its arguments in the manner suggested in the POV-Ray Reference Manual. This is a general isosurface macro, useful not only for blobs and rounded edges, but for all sorts of isosurfaces.

<p>N.B.: <code>evaluate</code> does not perform well in POV-Ray 3.7, due to multi-threading issues.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>Max_gradient</code></td>
  <td>float</td>
  <td>The maximum gradient of the function, which can be obtained by testing the isosurface without <code>evaluate</code>.</td>
 </tr><tr>
  <td><code>Min_factor</code></td>
  <td>float</td>
  <td>A factor by which to reduce the maximum gradient. This argument may require experimentation, but 0.6 is a good starting point.</td>
 </tr><tr>
  <td><code>Attenuation</code></td>
  <td>float</td>
  <td>An attenuation parameter of 1 or less. This argument may require experimentation, but 0.7 is a good starting point.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a>

<h2 id="Isosurface_Functions">Isosurface Functions</h2>

<p>For all of these functions, the default threshold (0.0) and default polarity (<code>off</code>, or negative) are assumed.

<p>Note: In order to avoid a POV-Ray namespace scope feature, all the function arguments (other than <code>x</code>, <code>y</code>, and <code>z</code>) in <code>roundedge.inc</code> begin with “<code>RE_P</code>” followed by a digit and an underscore. In this user manual, this prefix is omitted for clarity.

<h3 id="RE_fn_Blob">RE_fn_Blob (Value, Blob)</h3>

<p><img class="demo" src="roundedge_30.jpg" alt="[Demo image of RE_fn_Blob()]">
An isosurface blobbing function. This function is based on the formula for the blob primitive, so when it’s used with <code>f_sphere()</code>, it gives results identical to the blob primitive (within the limits of the accuracy of the isosurface).

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>Value</code></td>
  <td>float</td>
  <td>The unblobbed function value <var>f</var> (<var>x</var>, <var>y</var>, <var>z</var>, …)
 </tr><tr>
  <td><code>Blob</code></td>
  <td>float</td>
  <td>“Blobbiness.” Depending on the function, this is typically:
   <ul>
    <li><var>field radius</var> &minus; <var>surface radius</var>
    <li><var>field radius</var> ÷ <var>surface radius</var> &minus; 1
   </ul>
  </td>
 </tr>
</table>

<h4>Usage</h4>
<p>Subtract <code>RE_fn_Blob()</code> of all base functions from 1. For example:
<pre>isosurface
{ function
  { 1 - RE_fn_Blob (abs(x) + abs(z) - 1, 0.3)
      - RE_fn_Blob (f_sphere (0, y, z, 0.8), 0.2)
  }
  max_gradient 4 / 0.2
  contained_by { box { -&lt;2.5, 2, 1>, &lt;2.5, 2, 1> } }
}</pre>

<h3 id="RE_fn_Blob2" class="anew">RE_fn_Blob2 (Value, Blob)</h3>

<p><img class="demo" src="roundedge_31.jpg" alt="[Demo image of RE_fn_Blob2()]">
Another isosurface blobbing function. This function uses an alternate formula that gives smoother curves for some joins than the standard blob formula. With this formula, perpendicular planes yield a blob with a circular cross section, making it useful in conjunction with the cylinder, sphere, and torus primitives.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>Value</code></td>
  <td>float</td>
  <td>The unblobbed function value <var>f</var> (<var>x</var>, <var>y</var>, <var>z</var>, …)
 </tr><tr>
  <td><code>Blob</code></td>
  <td>float</td>
  <td>“Blobbiness.” Depending on the function, this is typically:
   <ul>
    <li><var>field radius</var> &minus; <var>surface radius</var>
    <li><var>field radius</var> ÷ <var>surface radius</var> &minus; 1
   </ul>
  </td>
 </tr>
</table>

<h4>Usage</h4>
<ol>
 <li>Add <code>RE_fn_Blob2()</code> of all base functions.
 <li>Take the square root of the sum. (This step is not strictly necessary; however, it stabilizes the gradient and is <em>well</em> worth the overhead.) <code>RE_fn_Blob2()</code> always returns a non-negative number, so it is not necessary to check for a negative square root operand unless you are using a negative blob component.
  <p><strong>Warning:</strong> It has come to my attention that a negative square root operand, in the context of an isosurface, does not <dfn title="signal that an error has occurred">raise an exception</dfn>. If you use a negative blob component without checking that the sum of the components is non-negative, the isosurface can fail silently, without halting the render.
 <li>Subtract from 1.
</ol>
<p>Example:
<pre>isosurface
{ function
  { 1 - sqrt
    ( RE_fn_Blob2 (abs(x) + abs(z) - 1, 0.3)
    + RE_fn_Blob2 (f_sphere (0, y, z, 0.8), 0.2)
    )
  }
  max_gradient 1.3 / 0.2
  contained_by { box { -&lt;2.5, 2, 1>, &lt;2.5, 2, 1> } }
}</pre>

<p>Note: the max gradient will typically be inversely proportional to the smallest <code>Blob</code> argument.

<h3>Editorial</h3>

<dl>
 <dt>Why use the <code>blob</code> primitive?
 <dd>It is highly optimized by the competent POV-Ray developers; it’s much faster than <code>isosurface</code>.
 <dd>Individual components can have their own textures.

 <dt>Why use isosurface blobbing?
 <dd>Arbitrary component shapes can be used, not just spheres and cylinders.

 <dt>Why use <code>RE_fn_Blob()</code> or <code>RE_fn_Blob2()</code> instead of the isosurface blobbing methods suggested in the POV-Ray documentation?
 <dd><code>RE_fn_Blob()</code> and <code>RE_fn_Blob2()</code> match the curves of POV-Ray primitives, allowing primitive and isosurface blob to work together. The primitives can then model the bulk of the object, leaving only the blobbed portions to be modeled with the isosurface. This results in dramatically shorter rendering times.
  The illustrations for <a href="#RE_fn_Hole"><code>RE_fn_Hole()</code></a> and <a href="#RE_fn_Wheel"><code>RE_fn_Wheel()</code></a> demonstrate seamless joins between <code>RE_fn_Blob2()</code> blobs and <code>RE_Straight_join_x()</code>.
</dl>

<p><a href="#toc">Table of contents</a>

<h3 id="RE_fn_Hole" class="anew">RE_fn_Hole (x, y, z, RMajor, rMinor)</h3>

<p><img class="demo" src="roundedge_32.jpg" alt="[Demo image of RE_fn_Hole() with RE_fn_Blob2()]">
A slab with a rounded-edged hole punched through it, equivalent to
<code><a href="#RE_Hole">RE_Hole</a> (-rMinor*y, rMinor*y, </code>∞<code>, RMajor - rMinor, rMinor, 1)</code>.
Its utility is with isosurface blobs. In the illustration, the colored patch is an isosurface of <code>RE_fn_Hole()</code> blobbed using <code>RE_fn_Blob2()</code>.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>RMajor</code></td>
  <td>float</td>
  <td>The radius of the hole.</td>
 </tr><tr>
  <td><code>rMinor</code></td>
  <td>float</td>
  <td>The minor radius of the rounded edge.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a><hr>

<h3 id="RE_fn_Parabolic_torus" class="anew">RE_fn_Parabolic_torus (x, y, z, H, R)</h3>

<p><img class="demo" src="roundedge_33.jpg" alt="[Demo image of RE_fn_Parabolic_torus()]">
A circle of radius <code>R</code> parallel to the <var>y</var>-<var>z</var> plane, swept along the parabola <var>y</var> = <code>H</code><var>x</var><sup>2</sup> | <var>z</var> = 0. Slower, but better behaved than <a href="#RE_Parabolic_torus">macro <code>RE_Parabolic_torus()</code></a>. Check the message window to determine <code>max_gradient</code>.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>H</code></td>
  <td>float</td>
  <td>The amplitude of the parabola.</td>
 </tr><tr>
  <td><code>R</code></td>
  <td>float</td>
  <td>The minor radius of the rounded edge.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a><hr>

<h3 id="RE_fn_Wheel" class="anew">RE_fn_Wheel (x, y, z, RMajor, rMinor)</h3>

<p><img class="demo" src="roundedge_34.jpg" alt="[Demo image of RE_fn_Wheel() with RE_fn_Blob2()]">
A merge of a torus and a cylinder, equivalent to
<code><a href="#RE_Cylinder">RE_Cylinder</a> (-rMinor*y, rMinor*y, RMajor + rMinor, rMinor, 1)</code>.
Its utility is with isosurface blobs. In the illustration, the colored patch is an isosurface of <code>RE_fn_Wheel()</code> blobbed using <code>RE_fn_Blob2()</code>.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>RMajor</code></td>
  <td>float</td>
  <td>The major radius of the torus.</td>
 </tr><tr>
  <td><code>rMinor</code></td>
  <td>float</td>
  <td>The minor radius of the rounded edge.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a><hr>

<h3 id="max_gradient">max_gradient Warnings</h2>

<p>POV-Ray 3.7 fails to issue <code>max_gradient</code> warnings on declared isosurfaces. The following code will not generate any warnings, regardless of the specified <code>max_gradient</code> and maximum gradient found:
<pre>#declare MyObject = isosurface { <var>...</var> }
object { MyObject }</pre>

<p>To establish and verify a <code>max_gradient</code> in POV-Ray 3.7, you must use the isosurface directly:
<pre>isosurface { <var>...</var> }</pre>

<p>After the maximum gradient is established during testing, you may rewrite your scene with a declared isosurface.

<p>This bug is fixed in POV-Ray 3.8.

<p><a href="#toc">Table of contents</a><hr>

<h2 id="Blob_Assist_Functions">Blob Assist Functions</h2>

<p>Note: In order to avoid a POV-Ray namespace scope feature, all the function arguments in <code>roundedge.inc</code> begin with “<code>RE_P</code>” followed by a digit and an underscore. In this user manual, this prefix is omitted for clarity.

<p>Note: Functions <code>RE_fn_Blob_surface_radius()</code> and <code>RE_fn_Blob_field_radius()</code> were originally called <code>RE_fn_Blob_distance()</code> and <code>RE_fn_Blob_radius()</code>, respectively. The old names reflect the terminology in the POV-Ray Reference Manual, but I feel the new names are more intuitive and easier to recall. The old function names still work.

<h3 id="RE_fn_Blob_surface_radius">RE_fn_Blob_surface_radius (RField, Strength)</h3>

<p><img class="demo" src="roundedge_35.jpg" alt="[Demo image of RE_fn_Blob_surface_radius()]">
Returns the surface radius of a blob component, given the field radius and field strength. The default blob threshold of 1.0 is assumed. Use this function when the exact size of a blob component needs to be known. In the illustration, the size of the opening is matched to the blob.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>RField</code></td>
  <td>float</td>
  <td>The field radius of the component.</td>
 </tr><tr>
  <td><code>Strength</code></td>
  <td>float</td>
  <td>The field strength of the component.</td>
 </tr>
</table>

<h3 id="RE_fn_Blob_field_radius" class="anew">RE_fn_Blob_field_radius (RSurface, Strength)</h3>

<p><img class="demo" src="roundedge_36.jpg" alt="[Demo image of RE_fn_Blob_field_radius() and RE_fn_Blob_strength()]">
Returns the field radius that yields a blob component of the desired surface radius. The default blob threshold of 1.0 is assumed. Use this function when the exact size of a blob component is important. In the illustration, the blob is matched seamlessly to the half-torus.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>RSurface</code></td>
  <td>float</td>
  <td>The desired surface radius of the component.</td>
 </tr><tr>
  <td><code>Strength</code></td>
  <td>float</td>
  <td>The field strength of the component.</td>
 </tr>
</table>

<h3 id="RE_fn_Blob_strength">RE_fn_Blob_strength (RSurface, RField)</h3>

<p>Returns the field strength that yields a blob component of the desired surface radius. The default blob threshold of 1.0 is assumed. Use this function when the exact size of a blob component is important. In the illustration above, the blob is matched seamlessly to the half-torus.

<h4>Arguments</h4>
<table>
 <tr><th>Formal Parameter</th> <th>Type</th> <th>Description</th></tr>
 <tr>
  <td><code>RSurface</code></td>
  <td>float</td>
  <td>The desired surface radius of the component.</td>
 </tr><tr>
  <td><code>RField</code></td>
  <td>float</td>
  <td>The field radius of the component.</td>
 </tr>
</table>

<p><a href="#toc">Table of contents</a><hr>

<h2 id="Other">Other Identifiers</h2>

<h3>Parameters</h3>

<table>
 <tr>
  <th>Identifier</th> <th>Type</th> <th>Description</th> <th>Default</th>
 </tr><tr>
  <td><code>RE_ABIT</code></td>
  <td>float</td>
  <td>Slightly greater than zero, for avoiding coincident surfaces.</td>
  <td>0.001</td>
 </tr><tr>
  <td><code>RE_Debug</code></td>
  <td>float/Boolean</td>
  <td>If <code>on</code>, then some information will be written to the debug stream. Currently, only <a href="#RE_Evaluate"><code>RE_Evaluate()</code></a> calculations are written.</td>
  <td><code>off</code></td>
 </tr><tr>
  <td><code>RE_LESS</code></td>
  <td>float</td>
  <td>Slightly less than one, for avoiding coincident surfaces.</td>
  <td>0.999</td>
 </tr><tr>
  <td><code>RE_MORE</code></td>
  <td>float</td>
  <td>Slightly greater than one, for avoiding coincident surfaces.</td>
  <td>1.001</td>
 </tr><tr>
  <td><code>RE_Split_union</code></td>
  <td>float/Boolean</td>
  <td>If <code>off</code>, then <a href="https://wiki.povray.org/content/Reference:Union#Split_Union"><code>split_union off</code></a> will be applied to the various rounded box and rounded cylinder unions. This can result in faster rendering when photons are used. If <code>on</code>, no action will be taken.</td>
  <td><code>off</code></td>
 </tr>
</table>

<p>If the user finds the default values unsatisfactory, these parameters may be modified at any time prior to using a macro.

<h3>Reference Identifiers</h3>

<table>
 <tr>
  <th>Identifier</th> <th>Type</th> <th>Description</th> <th>Value</th>
 </tr><tr>
  <td><code>RE_ATTENUATION</code></td>
  <td>float</td>
  <td>A suggested value for <a href="#RE_Evaluate"><code>RE_Evaluate()</code></a>’s <code>Attenuation</code> argument.</td>
  <td>0.7</td>
 </tr><tr>
  <td><code>RE_MIN_FACTOR</code></td>
  <td>float</td>
  <td>A suggested value for <code>RE_Evaluate()</code>’s <code>Min_factor</code> argument.</td>
  <td>0.6</td>
 </tr><tr>
  <td><code>ROUNDEDGE_VERSION</code></td>
  <td>float</td>
  <td>The RoundEdge version, in case the scene file needs that information.</td>
  <td>2.0</td>
 </tr>
</table>

<h3>Synonyms</h3>

<p>These names are retained from previous versions of RoundEdge.

<table>
 <tr>
  <th>Old Identifier Name</th> <th>Type</th> <th>New Name</th>
 </tr><tr>
  <td><code>RE_fn_Blob_distance</code></td>
  <td>function</td>
  <td><code>RE_fn_Blob_surface_radius</code></td>
 </tr><tr>
  <td><code>RE_fn_Blob_radius</code></td>
  <td>function</td>
  <td><code>RE_fn_Blob_field_radius</code></td>
 </tr>
</table>

<h3>Internal Identifiers</h3>

<p>Any identifiers in <code>roundedge.inc</code> that are not documented in this manual are considered “private” or “protected,” and are subject to change or elimination in a future update.

<p><a href="#toc">Table of contents</a><hr>

<h2 id="About">About RoundEdge</h2>

<address>
 <p>Copyright © 2008 &ndash; 2021 Richard Callwood III. Some rights reserved.
 <p>This library is free software; you can redistribute it and/or modify it under the terms of the <a href="https://www.gnu.org/licenses/old-licenses/lgpl-2.1.html">GNU Lesser General Public License version 2.1</a> as published by the Free Software Foundation.
 <p>This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
</address>

<h3>Object Collection Categories</h3>

<ul>
 <li><strong>Areas of Interest</strong>
  <ul>
   <li>Abstract forms
  </ul>
 <li><strong>Contribution Types</strong>
  <ul>
   <li>Objects
    <ul>
     <li>Solid (CSG-able)
    </ul>
   <li>Macros
   <li>Functions
    <ul>
     <li>Isosurface
     <li>Other
    </ul>
  </ul>
</ul>

<h3>Change Log</h3>

<table>
 <tr><th>Version</th> <th>Date</th> <th>Notes</th></tr>
 <tr>
  <td>1.0</td>
  <td>2008 September 4</td>
  <td>
   <ul>
    <li>Module elements are compiled and adapted for the Object Collection.
   </ul>
  </td>
 </tr><tr>
  <td>1.1</td>
  <td>2012 June 9 (incomplete upload)</td>
  <td>
   <ul>
    <li>Corner join and round inside join are added.
   </ul>
  </td>
 </tr><tr>
  <td>1.2</td>
  <td>2013 March 1 (incomplete upload)</td>
  <td>
   <ul>
    <li>The module is made compatible to POV-Ray 3.5.
    <li>A version identifier is added.
    <li>Elliptical toroids are added.
   </ul>
  </td>
 </tr><tr>
  <td>1.3</td>
  <td>2013 June 15</td>
  <td>
   <ul>
    <li>Some blob assist functions are renamed.
    <li>The demo scene file and documentation are updated, most importantly concerning <code>sqrt()</code> calls.
   </ul>
  </td>
 </tr><tr>
  <td>1.3.1</td>
  <td>2016 January 23</td>
  <td>
   <ul>
    <li>An artifact with merged rounded cylinders, when the edge radius is too large, is corrected.
   </ul>
  </td>
 </tr><tr>
  <td>2.0</td>
  <td>2020 April 29</td>
  <td>
   <ul>
    <li>Boxes with unequal edge radii are added.
    <li>An interface to the isosurface <code>evaluate</code> feature is added.
    <li>The message to the debug stream stating that <code>roundedge.inc</code> is included is suppressed by default.
   </ul>
  </td>
 </tr><tr>
  <td>2.0A</td>
  <td>2021 August 14</td>
  <td>
   <ul>
    <li>The User Manual and license texts are updated for repositories other than lib.povray.org.
   </ul>
  </td>
 </tr>
</table>

<h3>Acknowledgments</h3>

<ul>
 <li>Marc/nimda, for the reminder that square root calls need to be tested for negative operands. (Duh!)
</ul>

<p><a href="#toc">Table of contents</a>

</body>
</html>
